# 1단계 - 인수 테스트 기반 리팩터링
## 요구사항
- [ ] LineService 리팩터링
- [ ] LineSectionAcceptanceTest 리팩터링

## 요구사항 설명
### 인수 테스트 기반 리팩터링
- LineService 의 비즈니스 로직을 도메인으로 옮기기
- 한번에 많은 부분을 고치려 하지 말고 나눠서 부분부분 리팩터링하기
- 전체 기능은 인수 테스트로 보호한 뒤 세부 기능을 TDD 로 리팩터링하기

1. 도메인으로 옮길 로직 찾기
- 스프링 빈을 사용하는 객체와 의존하는 로직을 제외하고는 도메인으로 옮긴다.  

2. 도메인의 단위 테스트 작성하기
- 서비스 레이어에서 옮겨 올 로직의 기능을 테스트

3. 비즈니스 로직을 도메인으로 옮기기
- 기존 로직을 지우지 말고 새로운 로직을 만들어 수행
- 정상 동작 확인 후 기존 로직 제거

### 인수테스트 통합
- API 를 검증하기 보다는 시나리오, 흐름을 검증하는 테스트로 리팩터링 하기
- 반드시 하나의 시나리오로 통합할 필요는 없음
- 인수조건 예시
```
Feature: 지하철 구간 관련 기능

  Background 
    Given 지하철역 등록되어 있음
    And 지하철 노선 등록되어 있음
    And 지하철 노선에 지하철역 등록되어 있음

  Scenario: 지하철 구간을 관리
    When 지하철 구간 등록 요청
    Then 지하철 구간 등록됨
    When 지하철 노선에 등록된 역 목록 조회 요청
    Then 등록한 지하철 구간이 반영된 역 목록이 조회됨
    When 지하철 구간 삭제 요청
    Then 지하철 구간 삭제됨
    When 지하철 노선에 등록된 역 목록 조회 요청
    Then 삭제한 지하철 구간이 반영된 역 목록이 조회됨
```

## To-Do
- [ ] 도메인으로 옮길 로직 찾기
    - addLineStation 로직
    - removeLineStation 로직
    - getStations 로직
    - findUpStation 로직
- [ ] 도메인의 단위 테스트 작성
- [ ] 비즈니스 로직을 도메인으로 옮기기

